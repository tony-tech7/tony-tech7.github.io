<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AgriSense AI</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    #loader { color: #888; }
    #root { width: 100%; height: 500px; border: 1px solid #ccc; margin-top: 20px; }
  </style>
</head>
<body>
  <h1>AgriSense AI</h1>
  <p id="loader">Loading AI assistantâ€¦</p>
  <div id="root"></div>

  <script>
    async function loadWatsonEmbed() {
      try {
        // ðŸ”‘ Replace with your deployed backend URL
        const res = await fetch("https://tony-tech7-github-io.onrender.com/get-token");
        const data = await res.json();

        if (!data.token) throw new Error("No token returned");

        window.wxOConfiguration = {
          orchestrationID: "9ecb30ce1ca742deb8483bb6d8832abc_c83567fe-8d32-4f0a-81d4-72627bf337b4",
          hostURL: "https://eu-gb.watson-orchestrate.cloud.ibm.com",
          rootElementID: "root",
          deploymentPlatform: "ibmcloud",
          crn: "crn:v1:bluemix:public:watsonx-orchestrate:eu-gb:a/9ecb30ce1ca742deb8483bb6d8832abc:c83567fe-8d32-4f0a-81d4-72627bf337b4::",
          chatOptions: {
            agentId: "4f25bb83-2505-4cd7-89e1-9b9f24a8af56",
            agentEnvironmentId: "a08d1085-23ad-4f2b-869a-61c2908c6be3",
            authToken: data.token
          }
        };

        const script = document.createElement("script");
        script.src = `${window.wxOConfiguration.hostURL}/wxochat/wxoLoader.js?embed=true`;
        script.onload = () => document.getElementById("loader").style.display = "none";
        document.head.appendChild(script);

      } catch (err) {
        console.error("Failed to load Watson embed:", err);
        document.getElementById("loader").textContent = "Failed to load AI assistant.";
      }
    }

    loadWatsonEmbed();
  </script>
</body>
</html>

</html>


